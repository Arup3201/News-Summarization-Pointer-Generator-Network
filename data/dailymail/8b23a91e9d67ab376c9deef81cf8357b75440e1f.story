Chris Brown is going back to rehab, this time with new rules from a judge.

Los Angeles Superior Court Judge James R. Brandlin has ordered Brown to serve three months in a residential treatment facility and to submit to drug testing.

The judge also ordered the R&B singer to perform at least 24 hours of community labor per week. Scroll down for videos...

Not over yet: TMZ report that as a result of the judge wanting a report on the incident in Washington, Chris could still face time behind bars.

Brown's attorney, Mark Geragos, says the terms were recommended by probation officers, and the singer agrees to abide by them.

The
 24-year-old may still face a probation violation due to his arrest last
 month on a misdemeanor assault charge in Washington, D.C., but Brandlin
 and a prosecutor want more details.

TMZ have revealed that Chris was kicked out of his rehab program earlier this month after he through a rock at his mother's car window.

The site reports that his mother showed up to a 'family session' and was urging Christ to stay for extended treatment.

Chris is said to have 'violently disagreed with her' and shattered her car window with a rock.

TMZ also report that as a result of the judge wanting a report on the incident in Washington, Chris could still face time behind bars.

Facing the music: Chris Brown arrived at court dressed all in black as he was 'ordered to anger management rehab for 90 days'

On his best behaviour: Chris Brown wears an all-black suit as he arrives in court on Wednesday

Brown is due back in court Dec. 16 for another hearing. He remains on probation for his 2009 attack on then-girlfriend Rihanna.

It comes amid claims the singer flew into a violent rage while in rehab earlier this month for anger management treatment.

Brown is said to have thrown and broken objects while staying in a Malibu treatment facility, according to TMZ. He quit the three-month programme after just two weeks.Â 

Anger management: Chris looked on while his attorney Mark Geragos talked to the judge

Smartening up his act? Chris Brown arrives at court for a probation review hearing Wednesday in Los Angeles, where he was ordered back into rehab

Lucky escape? Chris Brown has avoided jail time but has been sentenced to 90 days in rehab

Chris appeared in court on Wednesday for a probation update stemming from his 2009 attack on Rihanna

The LA County District Attorney's Office wanted to put this forward as evidence - along with other incidents - to argue Brown's probation should be revoked, meaning he could have faced up to four years in jail.

Wednesday's hearing was the first time Brown had been in court since he 
was arrested last month in Washington, D.C.

A 20-year-old man accused 
Brown of punching him after he tried to get in a photo with the R&B 
singer.

Brown denied to police that he hit the man but was charged with misdemeanor assault.

It was this incident which prompted his rehab stay earlier this month for anger management issue.

Brown
 probation for assaulting Rihanna was briefly revoked this summer after a
 hit-and-run incident.

He was also ordered to redo 1,000 hours of 
community service because there were questions about whether he actually
 completed his initial penalty.

Lending support: Karrueche Tran attended the court session in support of her boyfriend Chris

Out on the town: Chris last week with on-off girlfriend Karrueche Tran shortly after he quit a three-month rehab stay after just two weeks

@highlight

The 24-year-old may still face time behind bars for his probation violation

@highlight

Chris is due back in court on December 16th for another hearing following an arrest last month

@highlight

TMZ report that Chris was kicked out of his rehab program earlier this month after he through a rock at his mother's car window