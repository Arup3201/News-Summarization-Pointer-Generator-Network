Roger Federer saved four match points as the 17-time Grand Slam champion produced a thrilling comeback against Stan Wawrinka to reach the final of the ATP World Tour Finals in London.

Federer had the O2 Arena crowd in raptures as he edged his Swiss compatriot and good friend Wawrinka 4-6, 7-5, 7-6 (8-6) in the best and longest match of the week so far at two hours and 48 minutes.

Federer now goes on to contest the final against world No 1 Novak Djokovic on Sunday evening as he bids to win his seventh season-ending championship.

VIDEO Scroll down to watch videos  

Roger Federer needed three sets to defeat compatriot Stan Wawrinka in the ATP World Tour Finals semi-final

Federer celebrates his hard-fought win against Wawrinka in front of the London crowd 

Stan Wawrinka celebrates winning the first set against Roger Federer in the ATP World Tour final

Wawrinka raced into an early lead, winning the first set 6-4 against his compatriot

World No 4 Wawrinka came into the last-four encounter with just two wins against 33-year-old Federer in their 16 meetings but it was the former who landed the first blow as Federer dropped serve for the first time this week in the third game.

A fierce forehand return earned Wawrinka a double break for 5-2 and although he initially failed to serve out the opening set against the world No 2, he made no mistake the second time in front of watching Real Madrid footballer James Rodriguez.

Proceedings remained tight throughout the second set with Wawrinka saving three break points at 2-3 but he faltered when serving to stay in the set, netting what should have been a simple overhead smash and Federer levelled the match.

Federer has been in sensational form during the ATP World Tour Finals in London

Real Madrid star James Rodriguez (left) was in attendance for the semi-final action

Fiorentina striker Juan Cuadrado takes a picture of the action while alongside Carlos Bacca 

Federer made the worst possible start to the final set as he failed to hear an overrule from umpire Cedric Mourier which went against him in the first point and was not a happy man upon discovering he was 0-40 down moments later.

Federer then sailed a forehand long to concede the break and continued to mutter away to Mourier about his overrule, which was shown by television to be incorrect, before Wawrinka repeatedly unleashed his powerful groundstrokes to stay in front.

Wawrinka saved two break points on serve at 4-3 but faltered when serving for the match as his serve-and-volley tactic on all three of his match points proved unsuccessful and Federer had the crowd on their feet as he broke back for 5-5.

Both players then held to take it to a deciding tiebreak and it was Wawrinka who had another chance to seal victory at 6-5 but his return went long and Federer completed the comeback on his first match point with a drop volley which Wawrinka could not reach.

Federer and Wawrinka will reunite next week in Lille where the pair will bid to claim victory for Switzerland against France in the Davis Cup final.

Federer has defeated Andy Murray and Kei Nishikori on his way to the ATP World Tour semi-final

Federer emerges from the smoke at the O2 Arena ahead of his match with Warwinka

Novak Djokovic will play in the final of the eight-man event having defeated Kei Nishikori in the semi-finals

@highlight

Roger Federer defeats Stan Wawrinka in three sets

@highlight

Federer will now play Novak Djokovic in the final on Sunday

@highlight

Djokovic defeated Kei Nishikori to earn final spot 