The son of tennis legend John McEnroe and actress Tatum O'Neal has been told that he will escape a prison term if he remains out of trouble following his arrest for drug possession.

Kevin McEnroe, 28, was arrested in New York in July for possession of a substance believed to be cocaine and illegally possessed prescription medicine. 

Details of the arrangement emerged in court documents following a hearing. 

Scroll down for video 

Kevin McEnroe was arrested in July for allegedly buying drugs on a Manhattan street corner 

Kevin McEnroe, right, pictured with his father John, left, has been told he must undergo treatment by November 20 if he is to be eligible for the arrangement which will see the charges against him dropped

Under the terms of the agreement, McEnroe will be enrolled in a treatment programme, which if successful will see any criminal charges withdrawn. 

A treatment option is not unusual in New  York for low-level cases. 

The Manhattan district attorney's office said McEnroe must complete his treatment by November 20.  

Prosecutors say tests showed the seeming cocaine actually wasn't any controlled substance. It's not immediately clear what it was.

Prosecutors reduced a felony charge against McEnroe to a misdemeanor.

McEnroe studied at the $44,000-a-year New York Trinity School before attending Skidmore and then Columbia University.

McEnroe had previously attended the elite $44,000-a-year Trinity School in Manhatten 

McEnroe's mother, Tatum O'Neal, left, lost custody of her children in the 1990s after she became and addict

In July, McEnroe was arrested on the corner of East 4th Street and Avenue A after being spotted by police. 

Police claimed they discovered McEnroe holding six bags of cocaine, 20 oxy pills, 10 morphine tablets and one dose of an anti-anxiety medicine. 

Forensic tests confirmed that the white powder in the packets was not cocaine. 

Before the agreement, McEnroe had been facing charges of criminal position. 

McEnroe's parents divorced back in 1994 and four years later John McEnroe had been granted custody of their children after Tatum O'Neal had become hooked on heroin.

She has struggled with drug addiction since she was in her teens. 

@highlight

Kevin McEnroe was arrested in July under suspicion for possessing drugs

@highlight

Forensic tests confirmed the white powder in six packets was not cocaine 

@highlight

He was also suspected of possessing an number of prescription medicines

@highlight

Court documents show that charges will be dismissed if he's receives help

@highlight

McEnroe must successfully complete the treatment by November 20

@highlight

He is the son of tennis player John McEnroe and actress Tatum O'Neal 