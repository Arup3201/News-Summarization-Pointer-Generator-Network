You're listening to a playlist on 'shuffle' when you notice three Katy Perry songs have played back to back - what are the chances?

While some dismiss this as a coincidence, others claim that so-called 'random' playlists aren't random at all. Instead, they say, music services are conspiring against listeners to promote tracks.

It's a criticism that Spotify has faced, and as a result the music service has had to change its algorithms to fit the human brain's warped idea of 'random'.

New York-based Spotify admits it had to change its playlist algorithm to be less random in order to trick its users into hearing what the believed to be random songs. The graphic shows different genre songs (labelled in various colours) spread out evenly to fit the human expectation for 'random' in Spotify's new algorithm

'On my 442 song playlist, the same 30 or 35 tracks play over and over again and the other 400 songs I have barely heard once,' one user wrote on a Spotify forum.

'It's almost unbelievable to me that such a simple process is broken,' another user wrote.

'The only remaining explanation I can give is that Spotify deliberately chooses the songs that are cheaper for Spotify to pay royalties.'

But Spotify has denied these allegations. Instead, it says, it's all in our heads.

'Our brain is an excellent pattern-matching device,' said Babar Zafar, a lead developer at Spotify, in an interview for Tech Tent on the BBC World Service.

'It will find patterns where there aren't any.'

Spotify realised that our brains actually want to see what we consider 'random' – or different genres of music spread evenly over a playlist. Spotify's algorithm – which is anything but random – uses the length of a playlist and records how many of each type of song it contains

The human brain is designed to notice coincidences. It is also programmed to expect something to happen if it hasn't occurred in a while.

For instance, people often think that if they haven't won anything in a scratch card lottery a couple of times in a row, they should have bigger chance of winning the next time.

This phenomenon is called Gambler's fallacy and it's the same fallacy that lead to the mistake about playlists not being random.

'If you just heard a song from a particular artist, that doesn't mean that the next song will be more likely from a different artist in a perfectly random order,' says Spotify on its blog.

'The problem is that, to humans, truly random does not feel random,' said Mattias Johansson, a Spotify software engineer, in a response on the question-and-answer site Quora.

Get two friends. Ask one to flip a coin 30 times and write down the sequence of heads and tails.

The other will imagine flipping a coin 30 times and also write the sequence of results. They do this in secret, so you don't know who has flipped the real coin and who has flipped the imaginary one. 

The 'wow' moment comes when you're presented with the two lists of heads and tails and it's usually instantly obvious which is which.

The first list is properly random. The second is a human attempting to be random. You can tell the difference because humans are very, very bad at faking randomness. We just can't do it.

There are different ways to tell the fake and real randomness apart, but the most obvious is to look for runs of straight heads, or straight tails. 

If one of the lists has a run of five heads or tails in a row, you can be pretty sure that's the real coin. In a list of 30 coin flips you're reasonably likely to get a run of five.

When someone is imagining coin flips, however, they almost never imagine a run of five straight heads or tails. This is because after two or three heads our brains tend to think, 'OK, time for a tails now.'

Our brains are implementing an order, a 'coin memory', whereas in fact true randomness has no memory of what came before.

Randomness creates counter-intuitively large clusters, such as a run of five heads in 30 flips of a coin, which leads to unexpected results.

'So we got tons of complaints from users about it not being random.

'Last year, we updated it with a new algorithm that is intended to feel more random to a human.'

Spotify realised that our brains actually want to see what we consider 'random' – or different genres of music spread evenly over a playlist.

Spotify's algorithm – which is anything but random – uses the length of a playlist and records how many of each type of song it contains.

If there are five Pulp songs in the playlist, they will appear at 20 per cent intervals.

Perfectly random means that the following two orders are equally likely to occur (different colours represent different artists). However, to the human brain the bottom row does not appear random

For artist's that only have one song in the playlist, the algorithm makes sure they appear at random intervals, rather than all at the start.

The algorithm also shuffles songs by the same artist among each other to prevent songs from the same album playing too close together.

Spotify isn't the only one who has had to make its playlists less random in order to appear more random.

In response to complaints from users, Apple chief executive Steve Jobs changed the programming behind its 'shuffle' feature to make sure each song was significantly different from the last.

But despite this, some people still see patterns in their playlists.

'Working at Spotify has taught me a few things, one of them being is that it's really, really, really hard to build something that a human will genuinely feel is shuffled.' Said Mr Johansson.

'People still constantly come up to me at parties and tell me that the shuffle functionality is not random.'

@highlight

Spotify was accused of making deal with labels to promote songs

@highlight

But it said patterns people see are due to warped concept of random

@highlight

Our expectations are based on something known as 'gambler's fallacy' 

@highlight

The group decided to change its playlist algorithm to be less random

@highlight

This meant tracks from different genres were spread evenly when played 