China signed a landmark deal today to buy Russian natural gas worth about $400 billion, giving a boost to diplomatically isolated President Vladimir Putin and expanding Moscow's ties with Asia.

Price negotiations on the 30-year deal continued into the final hours of a two-day visit by Putin to China, during which both sides had said they hoped to sign an agreement.

Putin was in Shanghai for an Asian security conference where China's president called for a new model of Asian security cooperation based on a regional group that includes Russia and Iran and excludes the United States.

Hand in hand: Russian President Vladimir Putin is greeted by his Chinese counterpart Xi Jinping at the Conference on Interaction and Confidence Building Measures in Asia  summit in Shanghai, China

Seeking 'innovative' co-operation: Xi shakes hands with Putin before calling for the creation of a new Asian security alliance based on a regional group that includes Russia, but excludes the United States

Watching eachother's back: The Conference on Interaction and Confidence-building measures has taken on significance as Beijing tries to extend its influence abroad and limit the role of the United States

The gas deal gives Moscow an economic 
boost at a time when Washington and the European Union have imposed visa
 bans and asset freezes on dozens of Russian officials and several 
companies over Ukraine. It allows Russia to diversify its markets for 
gas, which now goes mostly to Europe.

The
 agreement 'opened the door for Russia to enter into Asia's gas market,'
 said Keun-Wook Paik, senior research fellow at the Oxford Institute for
 Energy Studies.

Politically, the deal has provided 'a breathing space for Russia,' Paik said. 

'Russia, and Putin, can demonstrate it's not completely isolated because of the Ukraine crisis.

'Russia has demonstrated that they have a very reliable strategic partnership with China.'

Bending his ear: Xi takes his seat between Putin and Iranian leader Hassan Rouhani (right) before the opening ceremony of the conference in Shanghai

China and Russia have been negotiating the oil deal for more than a decade but had been hung up over the gas price.

The agreement calls for Russian government-controlled Gazprom to supply state-owned China National Petroleum Corp with 38 billion cubic meters of gas annually, Gazprom spokesman Sergey Kupriyanov said.

That would represent about a quarter of China's current annual gas consumption of nearly 150 billion cubic meters.

The contract is worth a total of $400billion, Gazprom CEO Alexei Miller told Russian news agencies.  

Russia will invest $55billion in fulfilling the contract while China will invest at least $20billion, Putin told Russian reporters in Shanghai. 

Plans call for building a pipeline to link China's northeast to a line that carries gas from western Siberia to the Pacific port of Vladivostok. 

Russia's
 economy has been bruised by its dispute with the West over Ukraine's 
tilt toward the European Union, a shift that inflamed Moscow's 
insecurities about declining influence and sparked its annexation of 
Crimea in March.

The supplies will help to ease gas shortages in China, the world's second-largest economy, and curb reliance on coal.

The
 U.S. treasury secretary, Jacob Lew, appealed to China during a visit 
last week to avoid taking steps that might offset sanctions.

However, American officials have acknowledged China's pressing need for energy.

The
 contract 'particularly important' at a time when Europe has threatened 
to cut gas imports and reduce its dependence on Russia because of the 
Ukraine crisis, said Alexander Lukin, a deputy head of the Russian 
Diplomatic Academy under the country's Foreign Ministry, quoted by the 
RIA Novosti news agency.

'We will be able to show to Europe that we have other customers,' Lukin said.

Alexei
 Pushkov, a Kremlin ally who is head of the international affairs 
committee of the Russian parliament's lower house, said on Twitter: 'The
 30-year gas contract with China is of strategic significance. Obama 
should give up the policy of isolating Russia: It will not work.'

CNPC announced it had signed a deal but it gave no details.

Putin met on Tuesday with Chinese President Xi Jinping while gas negotiations continued in private.

Meanwhile, Xi called today for
 the creation of a new Asian security alliance based on a regional group
 that includes Russia and Iran and excludes the United States.

He spoke at a meeting of the Conference on Interaction and Confidence-building measures in Asia.

World alliances: Afghan President Hamid Karzai (left) watches as Russian President Vladimir Putin shakes hands with Iranian President Hassan Rouhani before the opening ceremony at the Expo Center in Shanghai

The
 previously little-known group, founded in the 1990s, has taken on 
significance as Beijing tries to extend its influence abroad and limit 
the role of the United States, which it sees as a strategic rival.

Speaking
 to an audience in Shanghai included Russian President Vladimir Putin 
and President Hassan Rouhani of Iran, Xi said: 'We need to innovate our 
security co-operation (and) establish new regional security co-operation
 architecture.'

Xi appeared to warn 
some Asian nations about strengthening military alliances to counter 
China, saying this would not benefit regional security.

He also pledged to peacefully resolve 
China's disputes over territory, which have intensified in recent years,
 especially in the South and East China Seas.

During a visit to Asia last month, 
U.S. President Barack Obama also sought to reassure allies such as Japan
 and the Philippines that his long-promised strategic shift towards Asia
 and the Pacific, widely seen as aimed at countering China's rising 
influence, was real.

China 
is embroiled in bitter disputes with Vietnam and the Philippines over 
maritime boundaries in the South China Sea. Beijing and Tokyo are also 
at loggerheads over disputed islands in the East China Sea.

@highlight

30-year deal gives Russia boost after EU and U.S. sanctions over Ukraine

@highlight

Beijing and Moscow have been negotiating deal for over a decade

@highlight

Pact was struck in final hours of two-day visit by Putin to Shanghai